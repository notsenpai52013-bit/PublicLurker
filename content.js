// Dear you, kudos if you figure out this code :D Feel free to build your own client or do whatever using my inject implementation :) - Not_Senpai 
const toAdd = `let _L7HV=false;class _L7C {constructor() {this.el = document.createElement('div');Object.assign(this.el.style, {position: 'fixed',top: '100px',left: '100px',padding: '10px',borderRadius: '12px',border: '2px solid red',backgroundColor: 'rgba(255, 0, 0, 0.1)',color: 'red',fontFamily: 'sans-serif',cursor: 'move',zIndex: 9999,opacity: 0,transition: 'opacity 0.3s ease',userSelect: 'none',display: 'none'});document.body.appendChild(this.el);this.#makeDraggable();}setText(text) {this.el.textContent = text;}show() {this.el.style.display = 'block';requestAnimationFrame(() => {this.el.style.opacity = '1';});}hide() {this.el.style.opacity = '0';this.el.addEventListener('transitionend', () => {this.el.style.display = 'none';}, { once: true });}#makeDraggable() {let offsetX, offsetY;const onMouseMove = (e) => {this.el.style.left = \`\${e.clientX - offsetX}px\`;this.el.style.top = \`\${e.clientY - offsetY}px\`;};this.el.addEventListener('mousedown', (e) => {offsetX = e.offsetX;offsetY = e.offsetY;document.addEventListener('mousemove', onMouseMove);document.addEventListener('mouseup', () => {document.removeEventListener('mousemove', onMouseMove);}, { once: true });});}}class _L7 {constructor() {const banner = document.createElement('div');banner.id='_L7Banner';banner.textContent = ['Pu','bl','ic','Lu','rk','er',' V','er','si','on',' 7','.5','.3'].join(''); Object.assign(banner.style, { position: 'absolute', top: '0', left: '50%', transform: 'translateX(-50%)', height: '25px', background: 'transparent', color: 'red', border: '1px solid red', borderBottomLeftRadius: '8px', borderBottomRightRadius: '8px', textAlign: 'center', lineHeight: '25px', padding: '0 10px', fontFamily: 'sans-serif', zIndex: '9999', fontWeight: 'bold' }); document.body.appendChild(banner);this.visible = false;this.createOverlay();this.addToggleListener();this.addDragListeners();}createOverlay() {this.overlay = document.createElement('div');this.overlay.id='_L7Interface';this.overlay.style.cssText = \`position: fixed;top: 100px;left: 100px;width: 360px;background: rgba(0, 0, 0, 0.3);color: red;border: 2px solid red;border-radius: 10px;padding: 10px;text-align: center;font-family: sans-serif;z-index: 99999;opacity: 0;pointer-events: none;transition: opacity 0.3s;\`;const makeButton = (id, label) => {const btn = document.createElement('button');btn.id = id;btn.textContent = label;btn.style.cssText = \`margin: 2px;padding: 5px 10px;border-radius: 8px;border: 1px solid red;background: transparent;color: red;cursor: pointer;\`;return btn;};const makeSection = (titleText, buttons) => {const section = document.createElement('div');section.style.marginTop = '10px';const title = document.createElement('div');title.textContent = titleText.split('').join('');title.style.fontWeight = 'bold';title.style.fontSize = '18px';section.appendChild(title);const btnRow = document.createElement('div');btnRow.style.display = 'flex';btnRow.style.justifyContent = 'center';buttons.forEach(btn => btnRow.appendChild(btn));section.appendChild(btnRow);return section;};const header = document.createElement('div');header.textContent = ['P','u','bl','ic','L','u','rk','er',' ','7','.','5','.','3'].join('');header.style.fontWeight = 'bold';header.style.fontSize = '26px';this.overlay.appendChild(header);const credits = document.createElement('div');credits.textContent = ['B','y ', 'D','ea','dF','i','sh','7'].join('');credits.style.fontWeight = 'bold';credits.style.fontSize = '24px';this.overlay.appendChild(credits);this.cDis = new _L7C;const cOn = makeButton('_L7COn', ['O','n'].join(''));cOn.addEventListener('click', () => {this.cDis.show();cOn.style.background='black';cOff.style.background='transparent';});cOn.style.background='transparent';const cOff = makeButton('_L7COff', ['O','f','f'].join(''));cOff.addEventListener('click', () => {this.cDis.hide();cOff.style.background = 'black';cOn.style.background='transparent';});this.overlay.appendChild(makeSection(['Co','or','ds'].join(''), [cOn,cOff]));cOff.style.background='black';const lightingSection = document.createElement('div');lightingSection.style.marginTop = '10px';const lightingTitle = document.createElement('div');lightingTitle.style.fontSize='18px';lightingTitle.style.fontWeight='bold';lightingTitle.textContent = 'Lighting';lightingSection.appendChild(lightingTitle);const createCounterControl = (baseId, label, f) => {const container = document.createElement('div');container.style.cssText = \`display: flex;justify-content: center;align-items: center;margin-top: 5px;gap: 4px;\`;container.val=0;const labelDiv = document.createElement('div');labelDiv.id='_L7'+baseId+'label';labelDiv.textContent = label+' ('+'0)';labelDiv.style.flex = '1';labelDiv.style.color = 'red';const minusBtn = document.createElement('button');minusBtn.id = \`\${baseId}Minus\`;minusBtn.textContent = ['-'].join('');minusBtn.style.cssText = \`padding: 3px 8px;border-radius: 8px;border: 1px solid red;background: transparent;color: red;cursor: pointer\`;minusBtn.addEventListener('click',()=>{container.val = Math.round((container.val - 0.1) * 10)/10;labelDiv.textContent = label+' ('+container.val+')';f(container.val);});const plusBtn = document.createElement('button');plusBtn.id = \`\${baseId}Plus\`;plusBtn.textContent = ['+'].join('');plusBtn.style.cssText = minusBtn.style.cssText;plusBtn.addEventListener('click',()=>{container.val = Math.round((container.val + 0.1) * 10)/10;labelDiv.textContent = label+' ('+container.val+')';f(container.val);});container.appendChild(minusBtn);container.appendChild(labelDiv);container.appendChild(plusBtn);return container;};lightingSection.appendChild(createCounterControl('_L7LightingSunMoon', 'Sun/Moon Offset', (x)=>{game.gameScene.sun.dirOffset=x}));lightingSection.appendChild(createCounterControl('_L7LightingAmbient', 'Ambient Offset', (x)=>{game.gameScene.sun.ambOffset=x}));this.overlay.appendChild(lightingSection);const flOff = makeButton('_L7flOff', ['O','f','f'].join(''));flOff.addEventListener('click', () => {this.flType = 0;flOff.style.background = 'black';flTog.style.background = 'transparent';flHol.style.background = 'transparent';});flOff.style.background = 'transparent';const flTog = makeButton('_L7flTog', ['T','o','g','g','l','e'].join(''));flTog.addEventListener('click', () => {this.flType = 1;flOff.style.background = 'transparent';flTog.style.background = 'black';flHol.style.background = 'transparent';});flTog.style.background = 'black';const flHol = makeButton('_L7flHol', ['H','o','l','d'].join(''));flHol.addEventListener('click', () => {this.flType = 2;flOff.style.background = 'transparent';flTog.style.background = 'transparent';flHol.style.background = 'black';});flHol.style.background = 'transparent';const flSet = makeButton('_L7flSet', ['Set (KeyV)']);this.flSet = flSet;flSet.addEventListener('click', () => {this.flBinding = true;flSet.textContent = 'Set (...)';});this.flKey='KeyV'; this.flType=1; this.flBinding=false;this.overlay.appendChild(makeSection(['F','r','ee','lo','ok'].join(''), [flOff,flTog,flHol,flSet]));const HVOn=makeButton('_L7HVOn',['O','n'].join(''));HVOn.addEventListener('click',()=>{_L7HV=true;HVOn.style.background = 'black';HVOff.style.background='transparent';});const HVOff=makeButton('_L7HVOn',['O','f','f'].join(''));HVOff.addEventListener('click',()=>{_L7HV=false;HVOn.style.background = 'transparent';HVOff.style.background='black';});this.overlay.appendChild(makeSection(['He','al','th','Vi','ew'].join(''),[HVOn,HVOff]));HVOn.style.background = 'transparent';HVOff.style.background='black';document.body.appendChild(this.overlay);this.mainInterval=setInterval(() => {if (game.player&&game.player.world) {game.player.world.players.forEach(p => {p.mesh.updateNameTag();})}; if(game.player) this.cDis.setText(\`XYZ: \${game.player.pos.x.toFixed(3)} / \${game.player.pos.y.toFixed(3)} / \${game.player.pos.z.toFixed(3)}\`)}, 50);}addToggleListener() {document.addEventListener('keydown', (e) => {if (e.code === 'Alt'+'Right' && !e.repeat) {this.visible = !this.visible;if (this.visible) {this.overlay.style.opacity = '1';this.overlay.style.pointerEvents = 'auto';} else {this.overlay.style.opacity = '0';this.overlay.style.pointerEvents = 'none';}return;}if (this.flBinding) {this.flBinding = false;if (e.code !== 'Escape' && e.code !== 'Backspace') {this.flKey = e.code;}this.flSet.textContent = 'Set (' + this.flKey + ')';return;}if (e.code === this.flKey && document.pointerLockElement !== null && !e.repeat) {if (this.flType === 1) {this.setFL(!controls.fl);} else if (this.flType === 2) {this.setFL(true);}}});window.addEventListener('keyup', (e) => {if (e.code === this.flKey && this.flType === 2 && !this.flBinding) {this.setFL(false);}});}setFL(f) {if (f) {while (game.player.perspective !== 1) {game.player.perspective += 1;game.player.perspective %= 3;game.player.toggleCameraPerspective();}controls.fl = true;} else {while (game.player.perspective !== 0) {game.player.perspective += 1;game.player.perspective %= 3;game.player.toggleCameraPerspective();}controls.fl = false;controls.yawHolder = controls.yaw;controls.pitchHolder = controls.pitch;controls.updateCamera(0, 0);}}addDragListeners() {let isDragging = false;let offsetX, offsetY;this.overlay.addEventListener('mousedown', (e) => {isDragging = true;offsetX = e.clientX - this.overlay.offsetLeft;offsetY = e.clientY - this.overlay.offsetTop;e.preventDefault();});window.addEventListener('mousemove', (e) => {if (isDragging) {this.overlay.style.left = \`\${e.clientX - offsetX}px\`;this.overlay.style.top = \`\${e.clientY - offsetY}px\`;}});window.addEventListener('mouseup', () => {isDragging = false;});}}new _L7();console.log("worked");setTimeout(startGame, 100);class SunL7 {constructor(u){console.log('sunmade');I(this,"sun");I(this,"moon");I(this,"daySpeed");I(this,"sunDist");I(this,"offset");I(this,"ambi");I(this,"sunlight");I(this,"moonlight");I(this,"ambiIntensity",Ola(1.5,1e3));I(this,"sunIntensity",Ola(1,1e3));I(this,"moonIntensity",Ola(.5,1e3));this.gameScene=u,this.ambi=new AmbientLight(16777215,2),this.gameScene.ambientMeshes.add(this.ambi),this.sunlight=new DirectionalLight(0xfdfbd3,1),this.sunlight.target=controls.camera,this.gameScene.ambientMeshes.add(this.sunlight),this.moonlight=new DirectionalLight(0xacacc1,1),this.gameScene.ambientMeshes.add(this.moonlight),this.sun=textureManager.loadSprite("sun.png"),this.moon=textureManager.loadSprite("moon.png"),this.daySpeed=1/(12e3/Math.PI),this.sunDist=5e4,this.offset=new Vector3$1(this.sunDist,0,0),this.gameScene.ambientMeshes.add(this.sun),this.gameScene.ambientMeshes.add(this.moon);this.dirOffset=0;this.ambOffset=0;}update(){this.sun.visible=player.isOverworld(),this.moon.visible=player.isOverworld();let u=GameScene.tick.value;player.isOverworld()||(u=0),this.offset.x=Math.cos(u*this.daySpeed)*this.sunDist,this.offset.y=Math.sin(u*this.daySpeed)*this.sunDist;const h=player.pos.clone();h.y=0,h.add(this.offset.clone()),this.sunlight.position.set(h.x,h.y,h.z),this.sunlight.lookAt(player.pos),this.sun.position.set(h.x,h.y,h.z),this.sun.lookAt(this.sun.position);const p=player.pos.clone();p.y=0,p.add(this.offset.clone().multiplyScalar(-1)),this.moonlight.position.set(p.x,p.y,p.z),this.moonlight.lookAt(player.pos),this.moon.position.set(p.x,p.y,p.z),this.moon.lookAt(this.moon.position);const g=this.offset.y/this.sunDist/2+.5;this.sunIntensity.set(g),this.moonIntensity.set(.5-g/2);const y=mapRange(g,0,1,1.5,2);this.sunIntensity.set(4.0 * (Math.max(0, Math.min(this.offset.y / this.sunDist * 2, 1.0))) + this.dirOffset);this.moonIntensity.set(3.0 * (Math.max(0, Math.min(-this.offset.y / this.sunDist * 2, 1.0))) + this.dirOffset);this.ambiIntensity.set(0.8 + (0.3 * Math.abs(this.offset.y / this.sunDist)) + this.ambOffset),this.ambi.intensity=this.ambiIntensity.value,this.sunlight.intensity=this.sunIntensity.value,this.moonlight.intensity=this.moonIntensity.value;}}class PointerLockControlsL7{constructor(){I(this,"rotation",Ola({x:0,y:0},800));I(this,"positionLerp",new Herp);I(this,"position",new Vector3$1);I(this,"pitchObject",new Object3D);I(this,"yawObject",new Object3D);I(this,"pitch",0);I(this,"yaw",0);I(this,"lastPitch",0);I(this,"lastYaw",0);I(this,"enabled",!1);this.yawObject.add(this.pitchObject),document.addEventListener("mousemove",u=>{this.onMouseMove(u)},!1);this.yawHolder=0;this.pitchHolder=0;this.fl=false;}setCamera(u){u.rotation.set(0,0,0),this.pitchObject.add(u)}onMouseMove(u){if(this.enabled===!1)return;const h=u.movementX||u.mozMovementX||u.webkitMovementX||0,p=u.movementY||u.mozMovementY||u.webkitMovementY||0;this.updateCamera(h,p)}onTouchMove(u,h){this.updateCamera(u,h)}updateCamera(u,h){if(Math.abs(u)>300||Math.abs(h)>300)return;const p=2e-5,g=Game.isMobile?Options$1.touchSensitivity.value:Options$1.mouseSensitivity.value;const y=Math.PI/2;this.yawHolder-=u*p*g,this.pitchHolder-=h*p*g;this.pitchHolder=lodashExports.clamp(this.pitchHolder,-y,y);if(!this.fl){this.yaw=this.yawHolder;this.pitch=this.pitchHolder};this.rotation.y=this.yawHolder,this.rotation.x=this.pitchHolder,Options$1.cinematicMode||(this.yawObject.rotation.y=this.yawHolder,this.pitchObject.rotation.x=lodashExports.clamp(this.pitchHolder,-y,y))}update(u){this.positionLerp.get(this.position);const h=this.position.y+player.getEyeHeight()-(u?SNEAK_OFFSET:0);this.camera.position.set(this.position.x,h,this.position.z),Options$1.cinematicMode&&(this.yawObject.rotation.y=this.rotation.y,this.pitchObject.rotation.x=this.rotation.x)}fixedUpdate(u){this.positionLerp.set(u)}get camera(){return this.yawObject}get BSxaQNPOQu(){return this.camera.position}}`;function waitForHead() {return new Promise((resolve, reject) => {if (document.head) return resolve(document.head);const observer = new MutationObserver(() => { if (document.head) { observer.disconnect(); resolve(document.head); } }); observer.observe(document.documentElement, {childList: true}); }); } waitForHead().then(h => { setTimeout(() => { [...document.querySelectorAll('script')].forEach((script) => { if (script.src) { const url = new URL(script.src, location.href); if (/assets\/index-.*\.js$/.test(url.pathname)) { fetch(script.src) .then(res => res.text()) .then(code => { const base = script.src.replace(/\/[^\/]*$/, '/'); let patchedCode = code.replace(/(["'`])\/assets/g, `$1https://miniblox.io/assets`); patchedCode = patchedCode.replace(/new\s+Sun\s*\(\s*this\s*\)/g, 'new SunL7(this)'); patchedCode = patchedCode.replace('const controls', 'let controls'); patchedCode = patchedCode.replace('new PointerLockControls', 'new PointerLockControlsL7'); patchedCode += ` controls = new Proxy(controls, { get(target, prop, receiver) { if (prop in target) { return Reflect.get(target, prop, receiver); } return target.camera.position; } }); `; patchedCode = patchedCode.replace('this.entity.profile.username', `this.entity.profile.username+(_L7HV?' ('+this.entity.getHealth().toFixed(2)+')':'')`); patchedCode = toAdd + patchedCode; const blob = new Blob([patchedCode], { type: 'text/javascript' }); const blobURL = URL.createObjectURL(blob); const newScript = document.createElement('script'); newScript.type = 'module'; newScript.src = blobURL; document.head.appendChild(newScript); console.log('injected patched script:', blobURL); }) } } }); }, 250) });
